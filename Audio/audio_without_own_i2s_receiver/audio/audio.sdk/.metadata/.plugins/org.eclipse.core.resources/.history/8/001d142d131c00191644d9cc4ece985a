#include "menu.h"
#include "menu_navigation.h"
#include "stdio.h"

void debug(menu* menue, int len){

	for(int i = 0; i < len; i++){
		printf("submenu address: %x\n",menue->submenus[i]);
	}

}

int main() {

    menu main_menu;

    menu_create_main_menu(&main_menu,"ADAU1761 Configuration");

    // create main menue submenues
    char *main_menu_submenus_titles[3] = {"Input Signal Config", "Output Signal Config", "standard configuration"};
    menu_create_submenus(&main_menu, 3, main_menu_submenus_titles);
    menu_set_function(main_menu.submenus[2], &set_register);

    // create input signal submenus
    char *input_signal_options[2] = {"Mixer 1 Left Record Mixer (MX1AUXG config)", "Mixer 2 Right Record Mixer (MX2AUXG config)"};
    menu_create_submenus(main_menu.submenus[0], 2, input_signal_options);

    // create output signal submenus
    char *output_signal_options[4] = {"Mixer 3 Left Playback Mixer (MX3AUXG config)", "Mixer 4 Right Playback Mixer (MX4AUXG config)",
                                      "Mixer 5 (Left L/R Playback Mixer)", "Mixer 6 (Right L/R Playback Mixer)"};
    menu_create_submenus(main_menu.submenus[1], 4, output_signal_options);

    // submenues
    menu * Mixer1 = main_menu.submenus[0]->submenus[0];
    menu * Mixer2 = main_menu.submenus[0]->submenus[1];
    menu * Mixer3 = main_menu.submenus[1]->submenus[0];
    menu * Mixer4 = main_menu.submenus[1]->submenus[1];
    menu * Mixer5 = main_menu.submenus[1]->submenus[2];
    menu * Mixer6 = main_menu.submenus[1]->submenus[3];


    // create Mixer 1, Mixer 2, Mixer 3, Mixer 4 submenus
    char *mixer1_2_3_4_options[4]={"mute","0dB","3dB","6dB"};
    menu_create_submenus(Mixer1, 4, mixer1_2_3_4_options);
    menu_create_submenus(Mixer2, 4, mixer1_2_3_4_options);
    menu_create_submenus(Mixer3, 4, mixer1_2_3_4_options);
    menu_create_submenus(Mixer4, 4, mixer1_2_3_4_options);

    // create Mixer 5 and Mixer 6 submenus
    char*mixer5_6_options[5]={"mute", "MXG3 (left input) 0dB", "MXG3 (left input) 6dB",
                              "MXG4 (right input) 0dB", "MXG4 (right input) 6dB"};
    menu_create_submenus(Mixer5,5,mixer5_6_options);
    menu_create_submenus(Mixer6,5,mixer5_6_options);

    /* set mixer 1 values
    mute MX1AUXG 0x400B r5 = 000;
    0 db MX1AUXG 0x400B r5 = 101;
    3 db MX1AUXG 0x400B r5 = 110;
    6 db MX1AUXG 0x400B r5 = 111;
     */
    unsigned int Mixer1_2_config_choices[4] = {0,0x5,0x6,0x7};
    menu_set_submenu_reg_config_values(Mixer1, Mixer1_2_config_choices, 4);

    /* set mixer 2 values
    mute MX2AUXG 0x400D r7 = 000;
    0 db MX2AUXG 0x400D r7 = 101;
    3 db MX2AUXG 0x400D r7 = 110;
    6 db MX2AUXG 0x400D r7 = 111;
    */
    menu_set_submenu_reg_config_values(Mixer2, Mixer1_2_config_choices, 4);

    /* set mixer 3 values
    mute MX3AUXG 0x401C   r22 = 00001;
    0 db MX3AUXG 0x401C r22 = 01101;
    3 db MX3AUXG 0x401C r22 = 01111;
    6 db MX3AUXG 0x401C r22 = 10001;
    */
    unsigned int Mixer3_4_config_choices[4] = {1,0xD,0xF,0x11};
    menu_set_submenu_reg_config_values(Mixer3, Mixer3_4_config_choices, 4);

    /* set mixer 4 values
    mute MX4AUXG    0x401E   r22 = 00001;
    0 db MX4AUXG  0x401E   r22 = 01101;
    3 db MX4AUXG  0x401E r22 = 01111;
    6 db MX4AUXG 0x401E r22 = 10001;
    */
    menu_set_submenu_reg_config_values(Mixer4, Mixer3_4_config_choices, 4);

    /* set mixer 5 values
    mute      0x4020 r26 = 1;
    0 db MXG3 0x4020 r26 = 011;
    6 db MXG3 0x4020 r26 = 101;
    0 db MXG4 0x4020 r26 = 10001;
    6 db MXG4 0x4020 r26 = 10001; */
    unsigned int Mixer5_6_config_choices[5] = {1,0x3,0x5,0x9,0x11};
    menu_set_submenu_reg_config_values(Mixer5, Mixer5_6_config_choices, 5);

    /* set mixer 6 values
    mute      0x4021 r27 = 1;
    0 db MXG3 0x4021 r27 = 011;
    6 db MXG3 0x4021 r27 = 101;
    0 db MXG4 0x4021 r27 = 10001;
    6 db MXG4 0x4021 r27 = 10001;
    */
    menu_set_submenu_reg_config_values(Mixer6, Mixer5_6_config_choices, 5);

    printf("go to push_button_test\n");
    //push_buttons_test();
    menu_navigation();
}
